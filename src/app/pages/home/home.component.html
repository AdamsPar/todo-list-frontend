<body>
  <div class="todo-container">
    <h2>
      ToDo List <i class="fa-solid fa-clipboard-list"></i>
      <i class="fa-solid fa-pen"></i>
    </h2>

    <div class="input-section">
      <input
        name="title"
        [(ngModel)]="title"
        type="text"
        id="taskTitle"
        placeholder="Add the title of your task"
      />
      <input
        name="description"
        [(ngModel)]="description"
        type="text"
        id="taskTitle"
        placeholder="Add the description of your task"
      />
      <button (click)="createTask()" class="add-btn">
        <i class="fa-solid fa-plus"></i>
      </button>
    </div>

    <div class="task-sections">
      <!-- Pendientes -->
      <div class="task-section">
        <h3>Pendientes</h3>
        <ul class="task-list" id="pendiente-list">
          @for (item of pendingTask; track item.id;let i=$index) {
          <li class="task">
            <div class="task-content">
              <span class="title">{{ item.title }}</span>
              <p class="description">{{ item.description }}</p>
            </div>
            <div class="actions">
              <i (click)="editTask(item)" class="fa-solid fa-pen-to-square"></i>
              <i (click)="eliminateTask(item.id)" class="fa-solid fa-trash"></i>
            </div>
          </li>
          }
        </ul>
      </div>

      <!-- En curso -->
      <div class="task-section">
        <h3>En curso</h3>
        <ul class="task-list" id="encurso-list">
          @for (item of taskInProgress; track item.id;let i=$index) {
          <li class="task">
            <div class="task-content">
              <span class="title">{{ item.title }}</span>
              <p class="description">{{ item.description }}</p>
            </div>
            <div class="actions">
              <i (click)="editTask(item)" class="fa-solid fa-pen-to-square"></i>
              <i (click)="eliminateTask(item.id)" class="fa-solid fa-trash"></i>
            </div>
          </li>
          }
        </ul>
      </div>

      <!-- Finalizadas -->
      <div class="task-section">
        <h3>Finalizadas</h3>
        <ul class="task-list" id="finalizada-list">
          @for (item of taskCompleted; track item.id;let i=$index) {
          <li class="task completed">
            <div class="task-content">
              <span class="title">{{ item.title }}</span>
              <p class="description">{{ item.description }}</p>
            </div>
            <div class="actions">
              <i (click)="editTask(item)" class="fa-solid fa-pen-to-square"></i>
              <i (click)="eliminateTask(item.id)" class="fa-solid fa-trash"></i>
            </div>
          </li>
          }
        </ul>
      </div>
    </div>
  </div>

  <button class="add-btn-edit reportBtn" (click)="dowloadReport()">
    Descargar informe XML
  </button>
</body>

@if(showform) {
<div class="overlay">
  <div class="edit-task">
    <div class="input-section-edit">
      <input
        type="text"
        name="editTaskTitle"
        [(ngModel)]="editTaskTitle"
        id="taskTitle"
        placeholder="Add your task"
      />
      <input
        type="text"
        name="editTaskDescription"
        [(ngModel)]="editTaskDescription"
        id="taskDescription"
        placeholder="Add a description"
      />
      <select name="state" name="editTaskState" [(ngModel)]="editTaskState">
        <option value="pending" selected>Pentiente</option>
        <option value="in-progress">En Progreso</option>
        <option value="completed">Completada</option>
      </select>
      <div class="btns">
        <button (click)="showform = false" class="add-btn-cancel">
          Cancelar <i class="fa-solid fa-x"></i>
        </button>
        <button (click)="saveTask()" class="add-btn-edit">
          Guardar <i class="fa-solid fa-save"></i>
        </button>
      </div>
    </div>
  </div>
</div>
}
